# esp32p486.yaml
#
# Created: 06 January 2026
# Updated: 15 January 2026
#
# Copyright (C) 2026 KW Services.
# MIT License
#
# Verified on:
# Home Assistant
# Core              2025.12.5
# Supervisor        2026.01.0
# Operating System  16.3
# Frontend          20251203.3
# ESPHome           2025.12.6

esphome:
  name: esp32p486
  friendly_name: esp32p486

esp32:
  board: esp32-p4-evboard
  cpu_frequency: 400MHZ
  framework:
    type: esp-idf
    advanced: 
      enable_idf_experimental_features: True
  flash_size: 32MB

psram:
  speed: 200MHz

# Enable logging
logger:
  level: DEBUG
  logs: 
    lvgl: INFO
  #hardware_uart: UART0

# Enable Home Assistant API
api:
  encryption:
    key: !secret esp32p486_api_key

ota:
  - platform: esphome
    password: !secret esp32p486_ota_password

esp_ldo:
  - channel: 3
    voltage: 2.5V

# ethernet or wifi

# ethernet:
#   type: IP101
#   mdc_pin: 31
#   mdio_pin: 52
#   clk: 
#     mode: CLK_EXT_IN
#     pin: 50
#   power_pin: 51
#   phy_addr: 1

esp32_hosted:
  active_high: True
  variant: ESP32C6
  reset_pin: 54
  cmd_pin: 19
  clk_pin: 18
  d0_pin: 14
  d1_pin: 15
  d2_pin: 16
  d3_pin: 17

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  #use_address: 192.168.68.104
  manual_ip: 
    static_ip: 192.168.68.104
    gateway: 192.168.68.1
    subnet: 255.255.255.0
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: !secret esp32p486_ap_ssid
    password: !secret esp32p486_ap_password
  on_connect: 
    then:
      - lvgl.label.update:
          id: wifi_comm_id
          text_color: 0xffffff
      - lvgl.label.update:
          id: wifi_comm_id2
          text_color: 0xffffff
  on_disconnect: 
    then:
      - lvgl.label.update:
          id: wifi_comm_id
          text_color: 0xc0c0c0
      - lvgl.label.update:
          id: wifi_comm_id2
          text_color: 0xc0c0c0

# Enable web server
web_server:
  port: 80
  # auth:
  #   username: !secret central_ws_user
  #   password: sp!secret central_ws_password

captive_portal:
#################################################################

display:
  - platform: mipi_dsi
    model: WAVESHARE-P4-86-PANEL
    reset_pin:
      number: 27
      inverted: false

i2c:
  - sda: 7
    scl: 8
    scan: True
    frequency: 400kHz
    id: i2c_bus

touchscreen:
  - platform: gt911
    id: mytouchscreen
    on_release:
    - if:
        condition: lvgl.is_paused
        then:
          - logger.log: "LVGL resuming"
          - light.turn_on: display_backlight
          - lvgl.resume:
          - lvgl.widget.redraw:

font:
    #
    #  This font is acquired directly from google
    #
  - file: "gfonts://Roboto"
    id: roboto_title
    size: 50
    bpp: 4
  - file: "gfonts://Roboto"
    id: roboto
    size: 40
    bpp: 4

    #
    #  Note:  This file must reside on the Home Assistant system in a folder within esphome
    #         See our GitHub site.
    #
  - file: "fonts/materialdesignicons-webfont.ttf"
    id: mdi
    size: 48
    bpp: 4
    glyphs: [
      "\U000F0335", # mdi-lightbulb
      "\U000F0336", # mdi-lightbulb-outline
      "\U000F0210", # mdi-fan
      "\U000F081D", # mdi-fan-off
      "\U000F05A9", # mdi-wifi
      "\U000F0821", # mdi-floor-plan
      "\U000F097E", # mdi-light-switch
      ]


####################################################################

uart:
  - id: uart_modbus_client
    tx_pin: 47
    rx_pin: 48
    baud_rate: 9600

modbus:
  - uart_id: uart_modbus_client
    id: modbus_client
    send_wait_time: 200ms

modbus_controller:
  - id: modbus_rtu_d
    modbus_id: modbus_client
    address: 0x1
    update_interval: 5s
    on_online:
      then:
        - logger.log: "modbus_rtu_d is back online!"
        - lvgl.label.update:
            id: modbus_comm_id
            text_color: 0xffffff
    on_offline:
      then:
        - logger.log: "modbus_rtu_d went offline!"
        - lvgl.label.update:
            id: modbus_comm_id
            text_color: 0x0

#########################################################################

output:
  - platform: ledc
    id: backlight_
    pin: GPIO26
    frequency: 100Hz
    inverted: true
    min_power: 0.0
    max_power: 0.8 # To prevent overheating due to excessive lighting

switch:
  - platform: gpio
    name: Relay 0
    id: relay_0
    pin: 32
    on_turn_on:
        - lvgl.button.update:
            id: zero
            state:
              checked: true
        - lvgl.label.update:
            id: lbl_icon_zero
            text: "\U000F0335"
            text_color: 0xffffff
            text_font: mdi
        - logger.log: "Switch Turned On!"
    on_turn_off:
      then:
        - lvgl.button.update:
            id: zero
            state:
              checked: false
        - lvgl.label.update:
            id: lbl_icon_zero
            text: "\U000F0336"
            text_color: 0x0
            text_font: mdi
        - logger.log: "Switch Turned Off!"
  - platform: gpio
    name: Relay 1
    id: relay_1
    pin: 46
    on_turn_on:
        - lvgl.button.update:
            id: one
            state:
              checked: true
        - lvgl.label.update:
            id: lbl_icon_one
            text: "\U000F0210"
            text_color: 0xffffff
            text_font: mdi
        - logger.log: "Switch Turned On!"
    on_turn_off:
      then:
        - lvgl.button.update:
            id: one
            state:
              checked: false
        - lvgl.label.update:
            id: lbl_icon_one
            text: "\U000F081D"
            text_color: 0x0
            text_font: mdi
        - logger.log: "Switch Turned Off!"
############################################
###  Modbus RS485
############################################
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    id: relay_register1
    name: "RS485-Relay1"
    register_type: coil
    address: 0    #0:relay1  1:relay2
    bitmask: 1
    on_turn_on:
        - lvgl.button.update:
            id: btnrr1
            state:
              checked: true
        - lvgl.label.update:
            id: lbl_icon_rr1
            text: "\U000F0335"
            text_color: 0xffffff
            text_font: mdi
        - logger.log: "Switch Turned On!"
    on_turn_off:
      then:
        - lvgl.button.update:
            id: btnrr1
            state:
              checked: false
        - lvgl.label.update:
            id: lbl_icon_rr1
            text: "\U000F0336"
            text_color: 0x0
            text_font: mdi
        - logger.log: "Switch Turned Off!"
#################################################
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    id: relay_register2
    name: "RS485-Relay2"
    register_type: coil
    address: 1    #0:relay1  1:relay2
    bitmask: 1
    on_turn_on:
        - lvgl.button.update:
            id: btnrr2
            state:
              checked: true
        - lvgl.label.update:
            id: lbl_icon_rr2
            text: "\U000F0335"
            text_color: 0xffffff
            text_font: mdi
        - logger.log: "Switch Turned On!"
    on_turn_off:
      then:
        - lvgl.button.update:
            id: btnrr2
            state:
              checked: false
        - lvgl.label.update:
            id: lbl_icon_rr2
            text: "\U000F0336"
            text_color: 0x0
            text_font: mdi
        - logger.log: "Switch Turned Off!"
#################################################
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    id: relay_register3
    name: "RS485-Relay3"
    register_type: coil
    address: 2    #0:relay1  1:relay2
    bitmask: 1
    on_turn_on:
        - lvgl.button.update:
            id: btnrr3
            state:
              checked: true
        - lvgl.label.update:
            id: lbl_icon_rr3
            text: "\U000F0335"
            text_color: 0xffffff
            text_font: mdi
        - logger.log: "Switch Turned On!"
    on_turn_off:
      then:
        - lvgl.button.update:
            id: btnrr3
            state:
              checked: false
        - lvgl.label.update:
            id: lbl_icon_rr3
            text: "\U000F0336"
            text_color: 0x0
            text_font: mdi
        - logger.log: "Switch Turned Off!"
#################################################
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    id: relay_register4
    name: "RS485-Relay4"
    register_type: coil
    address: 3    #0:relay1  1:relay2
    bitmask: 1
    on_turn_on:
        - lvgl.button.update:
            id: btnrr4
            state:
              checked: true
        - lvgl.label.update:
            id: lbl_icon_rr4
            text: "\U000F0335"
            text_color: 0xffffff
            text_font: mdi
        - logger.log: "Switch Turned On!"
    on_turn_off:
      then:
        - lvgl.button.update:
            id: btnrr4
            state:
              checked: false
        - lvgl.label.update:
            id: lbl_icon_rr4
            text: "\U000F0336"
            text_color: 0x0
            text_font: mdi
        - logger.log: "Switch Turned Off!"



light:
  - platform: monochromatic
    name: Display Backlight
    output: backlight_
    id: display_backlight
    restore_mode: ALWAYS_ON

binary_sensor:
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Feedback CH1"
    address: 0
    register_type: coil
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_coil0),lv_color_hex(0x008000));
            } else {
            lv_led_set_color(id(led_coil0),lv_color_hex(0x800000));
            }    
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Feedback CH2"
    address: 1
    register_type: coil
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_coil1),lv_color_hex(0x008000));
            } else {
            lv_led_set_color(id(led_coil1),lv_color_hex(0x800000));
            } 
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Feedback CH3"
    address: 2
    register_type: coil
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_coil2),lv_color_hex(0x008000));
            } else {
            lv_led_set_color(id(led_coil2),lv_color_hex(0x800000));
            } 
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Feedback CH4"
    address: 3
    register_type: coil
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_coil3),lv_color_hex(0x008000));
            } else {
            lv_led_set_color(id(led_coil3),lv_color_hex(0x800000));
            } 
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Input1"
    id: input1
    address: 0 
    register_type: discrete_input
    bitmask: 1
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_1),lv_color_hex(0x008000));
            } else {
            lv_led_set_color(id(led_1),lv_color_hex(0x800000));
            }
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Input2"
    id: input2
    address: 1
    register_type: discrete_input
    bitmask: 1
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_2),lv_color_hex(0x00f8000));
            } else {
            lv_led_set_color(id(led_2),lv_color_hex(0x800000));
            }
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Input3"
    id: input3
    address: 2
    register_type: discrete_input
    bitmask: 1
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_3),lv_color_hex(0x008000));
            } else {
            lv_led_set_color(id(led_3),lv_color_hex(0x800000));
            }
  - platform: modbus_controller
    modbus_controller_id: modbus_rtu_d
    name: "Input4"
    id: input4
    address: 3
    register_type: discrete_input
    bitmask: 1
    on_state:
      then:
        - lambda: |-
            if (x) {
            // state is ON (true)
            lv_led_set_color(id(led_4),lv_color_hex(0x008000));
            } else {
            lv_led_set_color(id(led_4),lv_color_hex(0x800000));
            }
#######################################
#### LVGL
#######################################
lvgl:
  id: lvgl_component
  buffer_size: 100%
  byte_order: little_endian
  touchscreens:
    - touchscreen_id: mytouchscreen
      long_press_time: 5000ms
      long_press_repeat_time: 400ms
  on_idle:
  - timeout: 200s
    then:
      - lvgl.page.show: page2
      - light.turn_off: display_backlight
      - lvgl.pause:
  theme:
    led:
      width: 50
      height: 50
      radius: 25
      checkable: true
    button:
      width: 310
      checkable: true
      bg_color: 0xc0c0c0 
      checked:
        bg_color: 0x4F46E5   #0x00ffff    #0x008000
  top_layer:
    widgets:
      - obj:
          id: cont_bottom
          x: 30
          y: 590
          width: 660
          height: 90
          bg_opa: TRANSP
          border_color: 0x4B5563
          border_width: 0
          radius: 8
          layout:
            type: FLEX
            flex_flow: ROW
            flex_align_cross: CENTER
          widgets:
            - button:
                id: btn_previous
                align: center
                width: 310
                height: 60
                bg_color: 0x4F46E5
                border_color: 0x70A6C1
                widgets:
                  - label:
                      text: "Previous"
                      text_color: 0xFFFFFF
                      text_font: montserrat_32
                on_press:
                  then:
                    - lvgl.page.previous
            - button:
                id: btn_next
                align: center
                width: 310
                height: 60
                bg_color: 0x4F46E5
                border_color: 0x70A6C1
                widgets:
                  - label:
                      text: "Next"
                      text_color: 0xFFFFFF
                      text_font: montserrat_32
                on_press:
                  then:
                    - lvgl.page.next
  pages:
##############################################################
#### PAGE1
##############################################################
    - id: page1
      bg_color: 0x000000
      widgets:
        - obj:
            id: cont_top
            x: 30
            y: 0
            width: 660
            height: 90
            bg_opa: TRANSP
            border_color: 0x4B5563
            border_width: 0
            radius: 8
            layout:
              type: FLEX
              flex_flow: ROW
              flex_align_cross: CENTER
            widgets:
              - label:
                  id: title
                  width: 400
                  height: 50
                  align: center
                  text: "Control Panel"
                  text_color: 0xffff00
                  text_font: roboto_title
              - label:
                  id: wifi_comm_id
                  width: 80
                  height: 40
                  align: center
                  text: "\U000F05A9"
                  bg_color: 0x0
                  text_font: mdi
              - label:
                  id: modbus_comm_id
                  width: 80
                  height: 40
                  align: center
                  text: "\U000F0821"
                  bg_color: 0xffffff
                  text_font: mdi
##############################################################
##### cont_mid
##############################################################
        - obj:
            id: cont_mid
            x: 30
            y: 95
            width: 660
            height: 390
            bg_opa: TRANSP
            border_color: 0x4B5563
            border_width: 1
            radius: 8
            layout:
              type: grid
              grid_rows: [ fr(1),fr(1),fr(1),fr(1),fr(1)]
              grid_columns: [ fr(1), fr(1) ]
            widgets:
##############################################################
              - label:
                  id: relay_label
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 0
                  grid_cell_column_span: 2
                  text: "Relays:"
                  text_color: 0x00ffff
                  text_font: roboto
                  align: TOP_LEFT
##############################################################
              - button:
                  id: zero
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 0
                  widgets:
                    - label:
                        id: lbl_icon_zero
                        text: "\U000F0336"
                        text_font: mdi
                        text_color: 0x0
                        align: TOP_LEFT
                    - label:
                        id: lbl_zero
                        text: "Relay 0"
                        text_color: 0x0
                        text_font: montserrat_32
                        align: BOTTOM_RIGHT
                  on_value:
                    - if: 
                        condition:
                          lambda: |-
                            return x == true;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_zero
                              text: "\U000F0335"
                              text_font: mdi
                              text_color: 0xffffff
                              align: TOP_LEFT
                    - if: 
                        condition:
                          lambda: |-
                            return x == false;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_zero
                              text: "\U000F0336"
                              text_font: mdi
                              text_color: 0x0
                              align: TOP_LEFT
                  on_click:
                    then:
                      - switch.toggle: relay_0
##############################################################
              - button:
                  id: one
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 0
                  widgets:
                    - label:
                        id: lbl_icon_one
                        text: "\U000F081D"
                        text_font: mdi
                        text_color: 0x0
                        align: TOP_LEFT
                    - label:
                        id: lbl_one
                        text: "Relay 1"
                        text_font: montserrat_32
                        text_color: 0x0
                        align: BOTTOM_RIGHT
                  on_value:
                    - if: 
                        condition:
                          lambda: |-
                            return x == true;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_one
                              text: "\U000F0210"
                              text_font: mdi
                              text_color: 0xffffff
                              align: TOP_LEFT
                    - if: 
                        condition:
                          lambda: |-
                            return x == false;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_one
                              text: "\U000F081D"
                              text_font: mdi
                              text_color: 0x0
                              align: TOP_LEFT
                  on_click:
                    then:
                      - switch.toggle: relay_1
##############################################################
#### filler1
##############################################################
              - obj:
                  id: filler1
                  width: 620
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 2
                  bg_color: 0x0
                  border_width: 0
##############################################################
#### RS485
##############################################################
              - button:
                  id: btnrr1
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 1
                  widgets:
                    - label:
                        id: lbl_icon_rr1
                        text: "\U000F0336"
                        text_font: mdi
                        text_color: 0x0
                        align: TOP_LEFT
                    - led:
                        id: led_coil0
                        color: 0x800000
                        align: TOP_MID
                        widgets:
                          - label:
                              id: led_coil0_lbl
                              text: " "
                    - label:
                        id: lbl_rr1
                        text: "CH1"
                        text_color: 0x0
                        text_font: montserrat_32
                        align: BOTTOM_RIGHT
                  on_value:
                    - if: 
                        condition:
                          lambda: |-
                            return x == true;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr1
                              text: "\U000F0335"
                              text_font: mdi
                              text_color: 0xffffff
                              align: TOP_LEFT
                    - if: 
                        condition:
                          lambda: |-
                            return x == false;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr1
                              text: "\U000F0336"
                              text_font: mdi
                              text_color: 0x0
                              align: TOP_LEFT
                  on_click:
                    then:
                      - switch.toggle: relay_register1
##############################################################
              - button:
                  id: btnrr2
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 1
                  widgets:
                    - label:
                        id: lbl_icon_rr2
                        text: "\U000F0336"
                        text_font: mdi
                        text_color: 0x0
                        align: TOP_LEFT
                    - led:
                        id: led_coil1
                        color: 0x800000
                        align: TOP_MID
                        widgets:
                          - label:
                              id: led_coil1_lbl
                              text: " "
                    - label:
                        id: lbl_rr2
                        text: "CH2"
                        text_color: 0x0
                        text_font: montserrat_32
                        align: BOTTOM_RIGHT
                  on_value:
                    - if: 
                        condition:
                          lambda: |-
                            return x == true;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr2
                              text: "\U000F0335"
                              text_font: mdi
                              text_color: 0xffffff
                              align: TOP_LEFT
                    - if: 
                        condition:
                          lambda: |-
                            return x == false;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr2
                              text: "\U000F0336"
                              text_font: mdi
                              text_color: 0x0
                              align: TOP_LEFT
                  on_click:
                    then:
                      - switch.toggle: relay_register2
##############################################################
              - button:
                  id: btnrr3
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 1
                  widgets:
                    - label:
                        id: lbl_icon_rr3
                        text: "\U000F0336"
                        text_font: mdi
                        text_color: 0x0
                        align: TOP_LEFT
                    - led:
                        id: led_coil2
                        color: 0x800000
                        align: TOP_MID
                        widgets:
                          - label:
                              id: led_coil2_lbl
                              text: " "
                    - label:
                        id: lbl_rr3
                        text: "CH3"
                        text_color: 0x0
                        text_font: montserrat_32
                        align: BOTTOM_RIGHT
                  on_value:
                    - if: 
                        condition:
                          lambda: |-
                            return x == true;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr3
                              text: "\U000F0335"
                              text_font: mdi
                              text_color: 0xffffff
                              align: TOP_LEFT
                    - if: 
                        condition:
                          lambda: |-
                            return x == false;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr3
                              text: "\U000F0336"
                              text_font: mdi
                              text_color: 0x0
                              align: TOP_LEFT
                  on_click:
                    then:
                      - switch.toggle: relay_register3
##############################################################
              - button:
                  id: btnrr4
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 1
                  widgets:
                    - label:
                        id: lbl_icon_rr4
                        text: "\U000F0336"
                        text_font: mdi
                        text_color: 0x0
                        align: TOP_LEFT
                    - led:
                        id: led_coil3
                        color: 0x800000
                        align: TOP_MID
                        widgets:
                          - label:
                              id: led_coil3_lbl
                              text: " "
                    - label:
                        id: lbl_rr4
                        text: "CH4"
                        text_color: 0x0
                        text_font: montserrat_32
                        align: BOTTOM_RIGHT
                  on_value:
                    - if: 
                        condition:
                          lambda: |-
                            return x == true;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr4
                              text: "\U000F0335"
                              text_font: mdi
                              text_color: 0xffffff
                              align: TOP_LEFT
                    - if: 
                        condition:
                          lambda: |-
                            return x == false;
                        then:
                          - lvgl.label.update:
                              id: lbl_icon_rr4
                              text: "\U000F0336"
                              text_font: mdi
                              text_color: 0x0
                              align: TOP_LEFT
                  on_click:
                    then:
                      - switch.toggle: relay_register4
##############################################################
#### RS485 Input
##############################################################
        - obj:
            id: cont_inputs
            x: 30
            y: 490
            width: 660
            height: 100
            bg_color: 0x0
            border_width: 0
            layout:
              type: FLEX
              flex_flow: ROW
              flex_align_cross: CENTER
            widgets:
              - label:
                  id: title_inputs
                  width: 330
                  text: "Inputs:"
                  text_color: 0x00ffff
                  text_font: roboto
                  align: TOP_LEFT
              - led:
                  id: led_1
                  color: 0x800000
                  widgets:
                    - label:
                        id: led_1_lbl
                        text: "1"
                        text_font: roboto
                        text_color: 0xffffff
                        align: center
              - led:
                  id: led_2
                  color: 0x800000
                  widgets:
                    - label:
                        id: led_2_lbl
                        text: "2"
                        text_font: roboto
                        text_color: 0xffffff
                        align: center
              - led:
                  id: led_3
                  color: 0x800000
                  widgets:
                    - label:
                        id: led_3_lbl
                        text: "3"
                        text_font: roboto
                        text_color: 0xffffff
                        align: center
              - led:
                  id: led_4
                  color: 0x800000
                  widgets:
                    - label:
                        id: led_4_lbl
                        text: "4"
                        text_font: roboto
                        text_color: 0xffffff
                        align: center
##############################################################
#### PAGE2
##############################################################                      
    - id: page2
      bg_color: 0x000000
      widgets:
        - obj:
            id: cont_top2
            x: 30
            y: 0
            width: 660
            height: 90
            bg_opa: TRANSP
            border_color: 0x4B5563
            border_width: 0
            radius: 8
            layout:
              type: FLEX
              flex_flow: ROW
              flex_align_cross: CENTER
            widgets:
              - label:
                  id: title2
                  width: 400
                  height: 50
                  align: center
                  text: "Controls - Page 2"
                  text_color: 0xffff00
                  text_font: roboto_title
              - label:
                  id: wifi_comm_id2
                  width: 80
                  height: 40
                  align: center
                  text: "\U000F05A9"
                  bg_color: 0x0
                  text_font: mdi
              - label:
                  id: modbus_comm_id2
                  width: 80
                  height: 40
                  align: center
                  text: "\U000F0821"
                  bg_color: 0xffffff
                  text_font: mdi
        - obj:
            id: cont_mid2
            x: 30
            y: 110
            width: 660
            height: 480
            bg_opa: TRANSP
            border_color: 0x4B5563
            border_width: 1
            radius: 8
            layout:
              type: FLEX
              flex_flow: COLUMN_WRAP
              flex_align_cross: CENTER
            widgets:
              - obj:
                  id: filler2
                  width: 310
                  height: 72
                  bg_color: 0x0
                  border_width: 2
                  widgets:
                    - label:
                        id: lbl_filler2
                        text: "Relays/Inputs 5-8"
                        text_font: montserrat_32
                        text_color: 0xffffff
                        align: BOTTOM_RIGHT
            
# http_request:
#   verify_ssl: False